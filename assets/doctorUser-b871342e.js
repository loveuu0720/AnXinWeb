import{_ as H,a as w,r as J,a1 as K,o as Q,k as W,b as l,w as t,a2 as X,a3 as Y,n as a,d,al as Z,a6 as ee,am as le,e as te,E as x,g as oe,h as ae,i as re,j as ne,a7 as de,ae as ue,af as se,an as ie,aa as pe,ab as me,a5 as fe,ag as ge}from"./index-15d0a107.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                        *//* empty css                   *//* empty css                 *//* empty css                   *//* empty css                  *//* empty css                       *//* empty css                *//* empty css                     */import{h as y}from"./request-c66eae3e.js";import{a as be}from"./index-ca04d87c.js";const Ve=i=>y({url:"/doctor/page",method:"get",params:{page:i.page,pageSize:i.pageSize}}),_e=i=>y({url:"/doctor/modify",method:"post",data:i}),we=i=>y({url:"/doctor/pageByUsername",method:"post",params:{page:i.page,pageSize:i.pageSize,username:i.key}}),ve=i=>y({url:`/doctor/delDoc/${i}`,method:"get"});const xe={style:{flex:"auto"}},ye={__name:"doctorUser",setup(i){let z=w(0),f=w({page:1,pageSize:10,key:""}),U=w([]),r=J({});const g=w(!1),b=w(!1),c=w();K(()=>{V()});const V=async()=>{let u=await Ve(f.value);U.value=u.data.records,z.value=parseInt(u.data.total)},S=()=>{V()},D=()=>{V()},$=async()=>{let u=await we(f.value);console.log(u),U.value=u.data},B=()=>{window.location.reload()},P=u=>{g.value=!g.value,Object.assign(r,u)},h=async()=>{await _e(r),x.success("修改成功"),V(),g.value=!g.value},j=()=>{g.value=!g.value},N=async()=>{b.value=!b.value,await c.value.clearValidate(),Object.assign(r,{username:"",name:"",password:"",idnumber:"",hospitalname:"",departmentname:"",phone:"",briefIntroduction:"",sex:0,idleState:0})},R=async()=>{await c.value.validate(),(await be(r)).code==="1"?x.success("添加成功"):x.error("添加失败"),V(),b.value=!b.value},F=async u=>{(await ve(u)).code==="1"?(x.success("删除成功"),V()):x.error("删除失败")},I={username:[{required:!0,trigger:"blur",validator:(u,e,n)=>{e===""?n(new Error("用户名不能为空！")):e.trim().length<2?n(new Error("用户名至少2位！")):n()}}],phone:[{required:!0,trigger:"blur",validator:(u,e,n)=>{e===""?n(new Error("手机号不能为空!")):e.trim().length<2?n(new Error("手机号必须11位!")):n()}}],briefIntroduction:[{required:!0,trigger:"blur",message:"请填写医生简介！"}]},T={name:[{required:!0,message:"请输入用户名!",trigger:"blur"}],username:[{required:!0,message:"请输入医生姓名",trigger:"blur"}],idnumber:[{required:!0,message:"请输入合法的身份证号码!",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号!",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式错误!",trigger:"blur"}],briefIntroduction:[{required:!0,message:"医生简介不能为空!",trigger:"blur"}],hospitalname:[{required:!0,message:"医院不能为空!",trigger:"blur"}],departmentname:[{required:!0,message:"科室不能为空!",trigger:"blur"}]};return(u,e)=>{const n=oe,s=ae,m=re,C=ne,k=Y,p=de,_=ue,E=se,L=ie,M=pe,O=me,A=fe,G=ge;return Q(),W(X,null,[l(k,{style:{height:"80px"}},{default:t(()=>[l(C,{inline:!0},{default:t(()=>[l(s,{label:"医生姓名"},{default:t(()=>[l(n,{placeholder:"请输入医生姓名",modelValue:a(f).key,"onUpdate:modelValue":e[0]||(e[0]=o=>a(f).key=o)},null,8,["modelValue"])]),_:1}),l(s,null,{default:t(()=>[l(m,{type:"primary",size:"default",onClick:$,title:"请添加搜索条件"},{default:t(()=>[...e[16]||(e[16]=[d("搜索",-1)])]),_:1}),l(m,{size:"large",onClick:B},{default:t(()=>[...e[17]||(e[17]=[d("重置",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(k,{style:{"margin-top":"10px"}},{default:t(()=>[l(m,{type:"primary",icon:a(Z),onClick:N},{default:t(()=>[...e[18]||(e[18]=[d("新增医生",-1)])]),_:1},8,["icon"]),l(M,{border:"",style:{margin:"10px 0px"},data:a(U),stripe:""},{default:t(()=>[l(p,{label:"序号",width:"60px",type:"index",align:"center"}),l(p,{label:"医院",prop:"hospitalname",align:"center","show-overflow-tooltip":""}),l(p,{label:"科室",width:"60px",prop:"departmentname",align:"center","show-overflow-tooltip":""}),l(p,{label:"医生名",width:"70px",prop:"name",align:"center","show-overflow-tooltip":""}),l(p,{label:"用户名",width:"80px",prop:"username",align:"center","show-overflow-tooltip":""}),l(p,{label:"身份证号码",prop:"idnumber",align:"center","show-overflow-tooltip":""}),l(p,{label:"手机号",prop:"phone",align:"center","show-overflow-tooltip":""}),l(p,{label:"医生简介",width:"260px",prop:"briefIntroduction",align:"center","show-overflow-tooltip":""}),l(p,{label:"性别",prop:"sex",align:"center",width:"130px","show-overflow-tooltip":""},{default:t(({row:o,$index:q})=>[l(E,{modelValue:o.sex,"onUpdate:modelValue":v=>o.sex=v},{default:t(()=>[l(_,{label:"0",disabled:""},{default:t(()=>[...e[19]||(e[19]=[d("女",-1)])]),_:1}),l(_,{label:"1",disabled:""},{default:t(()=>[...e[20]||(e[20]=[d("男",-1)])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{label:"状态",align:"center",width:"220px",prop:"status"},{default:t(({row:o,$index:q})=>[l(E,{modelValue:o.status,"onUpdate:modelValue":v=>o.status=v},{default:t(()=>[l(_,{label:"0",border:"",disabled:""},{default:t(()=>[...e[21]||(e[21]=[d("禁用",-1)])]),_:1}),l(_,{label:"1",border:"",disabled:""},{default:t(()=>[...e[22]||(e[22]=[d("启用",-1)])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{label:"操作",align:"center",width:"220px"},{default:t(({row:o,$index:q})=>[l(m,{type:"primary",icon:a(ee),onClick:v=>P(o),class:"btn"},{default:t(()=>[...e[23]||(e[23]=[d("编辑",-1)])]),_:1},8,["icon","onClick"]),l(L,{title:"你确定要删除吗?",onConfirm:v=>F(o.id)},{reference:t(()=>[l(m,{type:"danger",icon:a(le)},{default:t(()=>[...e[24]||(e[24]=[d("删除",-1)])]),_:1},8,["icon"])]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"]),l(O,{"current-page":a(f).page,"onUpdate:currentPage":e[1]||(e[1]=o=>a(f).page=o),"page-size":a(f).pageSize,"onUpdate:pageSize":e[2]||(e[2]=o=>a(f).pageSize=o),"page-sizes":[5,10,15],background:!0,layout:" prev, pager, next, jumper,->,sizes,total",total:a(z),onSizeChange:S,onCurrentChange:D},null,8,["current-page","page-size","total"]),l(A,{modelValue:g.value,"onUpdate:modelValue":e[7]||(e[7]=o=>g.value=o),title:"修改医生信息",direction:"rtl"},{footer:t(()=>[te("div",xe,[l(m,{onClick:j},{default:t(()=>[...e[27]||(e[27]=[d("取消",-1)])]),_:1}),l(m,{type:"primary",onClick:h},{default:t(()=>[...e[28]||(e[28]=[d("确认",-1)])]),_:1})])]),default:t(()=>[l(C,{rules:I,model:a(r),"label-position":"left","label-width":"80px"},{default:t(()=>[l(s,{label:"用户名",rules:I,prop:"username"},{default:t(()=>[l(n,{placeholder:"请输入用户名",modelValue:a(r).username,"onUpdate:modelValue":e[3]||(e[3]=o=>a(r).username=o)},null,8,["modelValue"])]),_:1}),l(s,{label:"手机号",prop:"phone"},{default:t(()=>[l(n,{placeholder:"请输入手机号",modelValue:a(r).phone,"onUpdate:modelValue":e[4]||(e[4]=o=>a(r).phone=o)},null,8,["modelValue"])]),_:1}),l(s,{label:"医生简介",prop:"briefIntroduction"},{default:t(()=>[l(n,{placeholder:"请输入医生简介",modelValue:a(r).briefIntroduction,"onUpdate:modelValue":e[5]||(e[5]=o=>a(r).briefIntroduction=o),type:"textarea",autosize:""},null,8,["modelValue"])]),_:1}),l(s,{label:"性别",prop:"sex"},{default:t(()=>[l(E,{placeholder:"请选择性别",modelValue:a(r).sex,"onUpdate:modelValue":e[6]||(e[6]=o=>a(r).sex=o)},{default:t(()=>[l(_,{label:"0"},{default:t(()=>[...e[25]||(e[25]=[d("男",-1)])]),_:1}),l(_,{label:"1"},{default:t(()=>[...e[26]||(e[26]=[d("女",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(G,{modelValue:b.value,"onUpdate:modelValue":e[15]||(e[15]=o=>b.value=o),title:"新增医生",width:"30%"},{footer:t(()=>[l(m,null,{default:t(()=>[...e[29]||(e[29]=[d("取消",-1)])]),_:1}),l(m,{type:"primary",onClick:R},{default:t(()=>[...e[30]||(e[30]=[d("确定",-1)])]),_:1})]),default:t(()=>[l(C,{ref_key:"form",ref:c,rules:T,"label-position":"left","label-width":"100px",model:a(r),style:{"max-width":"460px"}},{default:t(()=>[l(s,{label:"用户名",prop:"name"},{default:t(()=>[l(n,{modelValue:a(r).name,"onUpdate:modelValue":e[8]||(e[8]=o=>a(r).name=o)},null,8,["modelValue"])]),_:1}),l(s,{label:"医生姓名",prop:"username"},{default:t(()=>[l(n,{modelValue:a(r).username,"onUpdate:modelValue":e[9]||(e[9]=o=>a(r).username=o)},null,8,["modelValue"])]),_:1}),l(s,{label:"身份证号码",prop:"idnumber"},{default:t(()=>[l(n,{modelValue:a(r).idnumber,"onUpdate:modelValue":e[10]||(e[10]=o=>a(r).idnumber=o)},null,8,["modelValue"])]),_:1}),l(s,{label:"医院",prop:"hospitalname"},{default:t(()=>[l(n,{modelValue:a(r).hospitalname,"onUpdate:modelValue":e[11]||(e[11]=o=>a(r).hospitalname=o)},null,8,["modelValue"])]),_:1}),l(s,{label:"科室",prop:"departmentname"},{default:t(()=>[l(n,{modelValue:a(r).departmentname,"onUpdate:modelValue":e[12]||(e[12]=o=>a(r).departmentname=o)},null,8,["modelValue"])]),_:1}),l(s,{label:"手机号",prop:"phone"},{default:t(()=>[l(n,{modelValue:a(r).phone,"onUpdate:modelValue":e[13]||(e[13]=o=>a(r).phone=o)},null,8,["modelValue"])]),_:1}),l(s,{label:"医生简介",prop:"briefIntroduction"},{default:t(()=>[l(n,{modelValue:a(r).briefIntroduction,"onUpdate:modelValue":e[14]||(e[14]=o=>a(r).briefIntroduction=o),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})],64)}}},Re=H(ye,[["__scopeId","data-v-e170d7c9"]]);export{Re as default};
