import{_ as G,a as v,r as H,a1 as J,o as K,k as Q,b as l,w as a,a2 as W,a3 as X,n as o,d as n,al as Y,a6 as Z,am as h,e as ee,E as x,g as le,h as ae,i as te,j as oe,a7 as re,ae as ne,af as se,an as de,aa as ue,ab as ie,a5 as pe,ag as me}from"./index-15d0a107.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                        *//* empty css                   *//* empty css                 *//* empty css                   *//* empty css                  *//* empty css                       *//* empty css                *//* empty css                     */import{h as U}from"./request-c66eae3e.js";import{c as ge}from"./index-ca04d87c.js";const fe=s=>U({url:"/patientuser/page",method:"get",params:{page:s.page,pageSize:s.pageSize}}),be=s=>U({url:`/patientuser/remove/${s}`,method:"get"}),_e=s=>U({url:"/patientuser/modify",method:"post",data:s}),Ve=s=>U({url:"/patientuser/getpage",method:"get",params:{page:s.page,pageSize:s.pageSize,username:s.key}});const ve={style:{flex:"auto"}},we={__name:"silkUser",setup(s){let E=v(1),g=v({page:1,pageSize:10,key:""}),y=v([]),r=H({});const f=v(!1),b=v(!1),k=v(),_=async()=>{let d=await fe(g.value);y.value=d.data.records,E.value=parseInt(d.data.total)};J(()=>{_()});const c=d=>{f.value=!f.value,Object.assign(r,d)},I=async d=>{(await be(d)).code==="1"?x.success("删除成功"):x.error("删除失败"),_()},j=async()=>{await k.value.validate(),await _e(r),x.success("修改成功！"),_(),f.value=!f.value},B=()=>{f.value=!f.value},R=async()=>{let d=await Ve(g.value);console.log(d),y.value=d.data.records},D=()=>{window.location.reload()},F=async()=>{b.value=!b.value,await k.value.clearValidate(),Object.assign(r,{address:"",name:"",username:"",password:"",idnumber:"",phone:"",sex:0,status:1})},L=async()=>{await k.value.validate(),(await ge(r)).code==="1"?(x.success("添加成功"),_()):x.error("添加失败"),b.value=!b.value},N=()=>{_()},S={name:[{required:!0,message:"请输入用户名!",trigger:"blur"},{required:!0,min:1,max:6,message:"用户名长度必须1-6位!",trigger:"blur"}],username:[{required:!0,message:"请输入患者姓名",trigger:"blur"}],idnumber:[{required:!0,message:"请输入身份证号码!",trigger:"blur"},{min:15,max:18,message:"请输入合法的身份证号码",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号!",trigger:"blur"},{required:!0,pattern:/^1[3-9]\d{9}$/,message:"手机号格式错误!",trigger:"blur"}],address:[{required:!0,message:"家庭住址不能为空!",trigger:"blur"}]};return(d,e)=>{const p=le,u=ae,m=te,z=oe,$=X,i=re,V=ne,C=se,P=de,T=ue,M=ie,O=pe,A=me;return K(),Q(W,null,[l($,{style:{height:"80px"}},{default:a(()=>[l(z,{inline:!0},{default:a(()=>[l(u,{label:"患者姓名"},{default:a(()=>[l(p,{placeholder:"请输入患者用户名",modelValue:o(g).key,"onUpdate:modelValue":e[0]||(e[0]=t=>o(g).key=t)},null,8,["modelValue"])]),_:1}),l(u,null,{default:a(()=>[l(m,{type:"primary",size:"default",title:"请添加搜索条件",onClick:R},{default:a(()=>[...e[16]||(e[16]=[n("搜索",-1)])]),_:1}),l(m,{size:"large",onClick:D},{default:a(()=>[...e[17]||(e[17]=[n("重置",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),l($,{style:{"margin-top":"10px"}},{default:a(()=>[l(m,{type:"primary",icon:o(Y),onClick:F},{default:a(()=>[...e[18]||(e[18]=[n("添加患者",-1)])]),_:1},8,["icon"]),l(T,{border:"",style:{margin:"10px 0px"},data:o(y)},{default:a(()=>[l(i,{label:"序号",width:"60px",type:"index",align:"center"}),l(i,{label:"患者ID",prop:"id",align:"center","show-overflow-tooltip":""}),l(i,{label:"患者姓名",prop:"name",align:"center","show-overflow-tooltip":""}),l(i,{label:"用户名",prop:"username",align:"center","show-overflow-tooltip":""}),l(i,{label:"家庭住址",prop:"address",align:"center","show-overflow-tooltip":""}),l(i,{label:"身份证号码",prop:"idnumber",align:"center","show-overflow-tooltip":""}),l(i,{label:"手机号",prop:"phone",align:"center","show-overflow-tooltip":""}),l(i,{label:"性别",prop:"gender",align:"center",width:"200px","show-overflow-tooltip":""},{default:a(({row:t,$index:q})=>[l(C,{modelValue:t.sex,"onUpdate:modelValue":w=>t.sex=w},{default:a(()=>[l(V,{label:"0",disabled:""},{default:a(()=>[...e[19]||(e[19]=[n("男",-1)])]),_:1}),l(V,{label:"1",disabled:""},{default:a(()=>[...e[20]||(e[20]=[n("女",-1)])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(i,{prop:"silkUserList.sex",label:"状态",align:"center",width:"300px"},{default:a(({row:t,$index:q})=>[l(C,{modelValue:t.status,"onUpdate:modelValue":w=>t.status=w},{default:a(()=>[l(V,{label:"0",border:"",disabled:""},{default:a(()=>[...e[21]||(e[21]=[n("禁用",-1)])]),_:1}),l(V,{label:"1",border:"",disabled:""},{default:a(()=>[...e[22]||(e[22]=[n("启用",-1)])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(i,{label:"操作",align:"center",width:"300px"},{default:a(({row:t,$index:q})=>[l(m,{type:"primary",icon:o(Z),onClick:w=>c(t),class:"btn"},{default:a(()=>[...e[23]||(e[23]=[n("编辑",-1)])]),_:1},8,["icon","onClick"]),l(P,{title:"你确定要删除吗?",onConfirm:w=>I(t.id)},{reference:a(()=>[l(m,{type:"danger",icon:o(h)},{default:a(()=>[...e[24]||(e[24]=[n("删除",-1)])]),_:1},8,["icon"])]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"]),l(M,{"current-page":o(g).page,"onUpdate:currentPage":e[1]||(e[1]=t=>o(g).page=t),"page-size":o(g).pageSize,"onUpdate:pageSize":e[2]||(e[2]=t=>o(g).pageSize=t),"page-sizes":[5,10,15],background:!0,layout:" prev, pager, next, jumper,->,sizes,total",total:o(E),onSizeChange:N,onCurrentChange:e[3]||(e[3]=t=>_())},null,8,["current-page","page-size","total"]),l(O,{modelValue:f.value,"onUpdate:modelValue":e[9]||(e[9]=t=>f.value=t),title:"修改患者信息",direction:"rtl"},{footer:a(()=>[ee("div",ve,[l(m,{onClick:B},{default:a(()=>[...e[27]||(e[27]=[n("取消",-1)])]),_:1}),l(m,{type:"primary",onClick:e[8]||(e[8]=t=>j(o(y)))},{default:a(()=>[...e[28]||(e[28]=[n("确认",-1)])]),_:1})])]),default:a(()=>[l(z,{rules:S,model:o(r),"label-position":"left","label-width":"80px"},{default:a(()=>[l(u,{label:"用户名",prop:"username"},{default:a(()=>[l(p,{placeholder:"请输入用户名",modelValue:o(r).username,"onUpdate:modelValue":e[4]||(e[4]=t=>o(r).username=t)},null,8,["modelValue"])]),_:1}),l(u,{label:"手机号",prop:"phone"},{default:a(()=>[l(p,{placeholder:"请输入手机号",modelValue:o(r).phone,"onUpdate:modelValue":e[5]||(e[5]=t=>o(r).phone=t)},null,8,["modelValue"])]),_:1}),l(u,{label:"家庭住址",prop:"address"},{default:a(()=>[l(p,{placeholder:"请输入医生简介",modelValue:o(r).address,"onUpdate:modelValue":e[6]||(e[6]=t=>o(r).address=t),type:"textarea",autosize:""},null,8,["modelValue"])]),_:1}),l(u,{label:"性别",prop:"sex"},{default:a(()=>[l(C,{placeholder:"请选择性别",modelValue:o(r).sex,"onUpdate:modelValue":e[7]||(e[7]=t=>o(r).sex=t)},{default:a(()=>[l(V,{label:"0"},{default:a(()=>[...e[25]||(e[25]=[n("男",-1)])]),_:1}),l(V,{label:"1"},{default:a(()=>[...e[26]||(e[26]=[n("女",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(A,{modelValue:b.value,"onUpdate:modelValue":e[15]||(e[15]=t=>b.value=t),title:"新增患者",width:"30%"},{footer:a(()=>[l(m,null,{default:a(()=>[...e[29]||(e[29]=[n("取消",-1)])]),_:1}),l(m,{type:"primary",onClick:L},{default:a(()=>[...e[30]||(e[30]=[n("确定",-1)])]),_:1})]),default:a(()=>[l(z,{ref_key:"form",ref:k,rules:S,"label-position":"left","label-width":"100px",model:o(r),style:{"max-width":"460px"}},{default:a(()=>[l(u,{label:"用户名",prop:"name"},{default:a(()=>[l(p,{modelValue:o(r).name,"onUpdate:modelValue":e[10]||(e[10]=t=>o(r).name=t)},null,8,["modelValue"])]),_:1}),l(u,{label:"患者姓名",prop:"username"},{default:a(()=>[l(p,{modelValue:o(r).username,"onUpdate:modelValue":e[11]||(e[11]=t=>o(r).username=t)},null,8,["modelValue"])]),_:1}),l(u,{label:"身份证号码",prop:"idnumber"},{default:a(()=>[l(p,{modelValue:o(r).idnumber,"onUpdate:modelValue":e[12]||(e[12]=t=>o(r).idnumber=t)},null,8,["modelValue"])]),_:1}),l(u,{label:"家庭住址",prop:"address"},{default:a(()=>[l(p,{modelValue:o(r).address,"onUpdate:modelValue":e[13]||(e[13]=t=>o(r).address=t)},null,8,["modelValue"])]),_:1}),l(u,{label:"手机号",prop:"phone"},{default:a(()=>[l(p,{modelValue:o(r).phone,"onUpdate:modelValue":e[14]||(e[14]=t=>o(r).phone=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})],64)}}},Re=G(we,[["__scopeId","data-v-190e0cfd"]]);export{Re as default};
