import{ap as L,aq as x,a0 as k,ar as C,a as b,a1 as E,o as P,c as j,w,b as I,n as B,ao as S,d as V,e as T,as as W,g as H,h as J,i as N,j as O,a3 as q,_ as F}from"./index-15d0a107.js";/* empty css                *//* empty css                     *//* empty css                  *//* empty css                 */import{h as G}from"./request-c66eae3e.js";var U={exports:{}};(function(_,M){(function(p,v){_.exports=v()})(L,function(){function p(e){var l=[];return e.AMapUI&&l.push(v(e.AMapUI)),e.Loca&&l.push(h(e.Loca)),Promise.all(l)}function v(e){return new Promise(function(l,o){var i=[];if(e.plugins)for(var a=0;a<e.plugins.length;a+=1)t.AMapUI.plugins.indexOf(e.plugins[a])==-1&&i.push(e.plugins[a]);if(u.AMapUI===n.failed)o("前次请求 AMapUI 失败");else if(u.AMapUI===n.notload){u.AMapUI=n.loading,t.AMapUI.version=e.version||t.AMapUI.version,a=t.AMapUI.version;var c=document.body||document.head,r=document.createElement("script");r.type="text/javascript",r.src="https://webapi.amap.com/ui/"+a+"/main.js",r.onerror=function(d){u.AMapUI=n.failed,o("请求 AMapUI 失败")},r.onload=function(){if(u.AMapUI=n.loaded,i.length)window.AMapUI.loadUI(i,function(){for(var d=0,A=i.length;d<A;d++){var g=i[d].split("/").slice(-1)[0];window.AMapUI[g]=arguments[d]}for(l();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()});else for(l();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()},c.appendChild(r)}else u.AMapUI===n.loaded?e.version&&e.version!==t.AMapUI.version?o("不允许多个版本 AMapUI 混用"):i.length?window.AMapUI.loadUI(i,function(){for(var d=0,A=i.length;d<A;d++){var g=i[d].split("/").slice(-1)[0];window.AMapUI[g]=arguments[d]}l()}):l():e.version&&e.version!==t.AMapUI.version?o("不允许多个版本 AMapUI 混用"):s.AMapUI.push(function(d){d?o(d):i.length?window.AMapUI.loadUI(i,function(){for(var A=0,g=i.length;A<g;A++){var y=i[A].split("/").slice(-1)[0];window.AMapUI[y]=arguments[A]}l()}):l()})})}function h(e){return new Promise(function(l,o){if(u.Loca===n.failed)o("前次请求 Loca 失败");else if(u.Loca===n.notload){u.Loca=n.loading,t.Loca.version=e.version||t.Loca.version;var i=t.Loca.version,a=t.AMap.version.startsWith("2"),c=i.startsWith("2");if(a&&!c||!a&&c)o("JSAPI 与 Loca 版本不对应！！");else{a=t.key,c=document.body||document.head;var r=document.createElement("script");r.type="text/javascript",r.src="https://webapi.amap.com/loca?v="+i+"&key="+a,r.onerror=function(d){u.Loca=n.failed,o("请求 AMapUI 失败")},r.onload=function(){for(u.Loca=n.loaded,l();s.Loca.length;)s.Loca.splice(0,1)[0]()},c.appendChild(r)}}else u.Loca===n.loaded?e.version&&e.version!==t.Loca.version?o("不允许多个版本 Loca 混用"):l():e.version&&e.version!==t.Loca.version?o("不允许多个版本 Loca 混用"):s.Loca.push(function(d){d?o(d):o()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var n;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(n||(n={}));var t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},u={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},s={AMap:[],AMapUI:[],Loca:[]},f=[],m=function(e){typeof e=="function"&&(u.AMap===n.loaded?e(window.AMap):f.push(e))};return{load:function(e){return new Promise(function(l,o){if(u.AMap==n.failed)o("");else if(u.AMap==n.notload){var i=e.key,a=e.version,c=e.plugins;i?(window.AMap&&location.host!=="lbs.amap.com"&&o("禁止多种API加载方式混用"),t.key=i,t.AMap.version=a||t.AMap.version,t.AMap.plugins=c||t.AMap.plugins,u.AMap=n.loading,a=document.body||document.head,window.___onAPILoaded=function(d){if(delete window.___onAPILoaded,d)u.AMap=n.failed,o(d);else for(u.AMap=n.loaded,p(e).then(function(){l(window.AMap)}).catch(o);f.length;)f.splice(0,1)[0]()},c=document.createElement("script"),c.type="text/javascript",c.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+t.AMap.version+"&key="+i+"&plugin="+t.AMap.plugins.join(","),c.onerror=function(d){u.AMap=n.failed,o(d)},a.appendChild(c)):o("请填写key")}else if(u.AMap==n.loaded)if(e.key&&e.key!==t.key)o("多个不一致的 key");else if(e.version&&e.version!==t.AMap.version)o("不允许多个版本 JSAPI 混用");else{if(i=[],e.plugins)for(a=0;a<e.plugins.length;a+=1)t.AMap.plugins.indexOf(e.plugins[a])==-1&&i.push(e.plugins[a]);i.length?window.AMap.plugin(i,function(){p(e).then(function(){l(window.AMap)}).catch(o)}):p(e).then(function(){l(window.AMap)}).catch(o)}else if(e.key&&e.key!==t.key)o("多个不一致的 key");else if(e.version&&e.version!==t.AMap.version)o("不允许多个版本 JSAPI 混用");else{var r=[];if(e.plugins)for(a=0;a<e.plugins.length;a+=1)t.AMap.plugins.indexOf(e.plugins[a])==-1&&r.push(e.plugins[a]);m(function(){r.length?window.AMap.plugin(r,function(){p(e).then(function(){l(window.AMap)}).catch(o)}):p(e).then(function(){l(window.AMap)}).catch(o)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},u={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},s={AMap:[],AMapUI:[],Loca:[]}}}})})(U);var D=U.exports;const R=x(D),$=()=>G({url:"/hospital/list",method:"get"}),z=k({__name:"index",setup(_){let M="",p=C();const v=b("");let h=b(),n=b();const t=()=>{R.load({key:"e16ba1e84eccc96c29f9022932e25c96",version:"2.0",plugins:["AMap.ToolBar","AMap.Scale","AMap.HawkEye","AMap.MapType","AMap.Geolocation"]}).then(s=>{M=s,p.value=new s.Map("container",{viewMode:"3D",pitch:30,zoom:17,center:[106.238794,29.999274]}),p.value.addControl(new s.ToolBar),p.value.addControl(new s.Scale),p.value.addControl(new s.HawkEye({isOpen:!0})),p.value.addControl(new s.MapType),p.value.addControl(new s.Geolocation)}).catch(s=>{console.log(s)})},u=()=>{W({url:"https://restapi.amap.com/v3/geocode/geo",method:"get",params:{key:"5dd455c428ed2152a91bf6db307697eb",address:v.value}}).then(s=>{h.value=s.data.geocodes[0].location;let f=h.value.split(",");p.value.clearMap(),p.value.setZoomAndCenter(14,f),$().then(m=>{n.value=m.data,n.value.forEach(e=>{let l=e.latitudeAndLongitude.split(",").map(a=>Number(a));const o=new M.Marker({position:l,title:e.name});p.value.add(o);let i=`
                <div>
                    <div><strong>医院名称:</strong>${e.name}</div>
                    <div><strong>医院地址:</strong>${e.address}</div>
                </div>
                `;o.on("click",function(a){new M.InfoWindow({content:i,offset:new M.Pixel(0,-30)}).open(p.value,a.target.getPosition())})})})})};return E(()=>{t()}),(s,f)=>{const m=H,e=J,l=N,o=O,i=q;return P(),j(i,{class:"card"},{default:w(()=>[I(o,{"label-width":"50px",inline:""},{default:w(()=>[I(e,{label:"地址",style:{"font-weight":"700"}},{default:w(()=>[I(m,{modelValue:v.value,"onUpdate:modelValue":f[0]||(f[0]=a=>v.value=a),placeholder:"请输入地址","prefix-icon":B(S),clearable:"",style:{width:"300px"}},null,8,["modelValue","prefix-icon"])]),_:1}),I(e,null,{default:w(()=>[I(l,{type:"primary",onClick:u,disabled:!v.value},{default:w(()=>[...f[1]||(f[1]=[V("获取该位置的经纬度",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1}),f[2]||(f[2]=T("div",{id:"container"},null,-1))]),_:1})}}});const oe=F(z,[["__scopeId","data-v-6fa3bd9f"]]);export{oe as default};
