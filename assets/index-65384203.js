import{a0 as D,a as r,r as L,a1 as G,o as J,k as K,b as t,w as l,e as g,n as o,ao as O,d as u,at as Q,al as W,aw as X,am as Y,a4 as N,a2 as Z,E as ee,ax as te,g as ae,h as le,i as oe,j as se,av as ne,a3 as re,a7 as ie,an as de,aa as pe,ab as ue,a5 as ce,_ as me}from"./index-15d0a107.js";/* empty css                  *//* empty css                   *//* empty css                        *//* empty css                   *//* empty css                 *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                    *//* empty css                     */import{a as _e,b as fe,d as ge,f as ve}from"./index-ca564672.js";import{h as z,b as V}from"./request-c66eae3e.js";const be=m=>z({url:`/hospital/removeAll/${m}`,method:"get"}),he=m=>z({url:`/hospital/listByName/${m}`,method:"get"}),we={class:"box"},xe={class:"left"},ye={class:"right"},Ee=D({__name:"index",setup(m){let v=r(),w=L({}),x=r(0),i=r(1),d=r(10),_=r({fileName:""}),b=r();const f=r(!1),h=r(""),c=async()=>{try{let a=await _e(i.value,d.value);a&&a.data&&(v.value=a.data.records||[],x.value=parseInt(a.data.total||0))}catch(a){console.error("Failed to fetch hospital list:",a)}};G(()=>{c(),b.value=localStorage.getItem("user_token")});const H=async a=>{await be(a),ee.success("删除成功"),c()},U=async a=>{_.value.fileName=a.data,await fe(_.value)},P=async a=>{try{let e=await ge(a,i.value,d.value);e&&e.data&&(w=e.data.records||[],f.value=!f.value)}catch(e){console.error("Failed to fetch department list:",e)}},B=a=>{te.confirm("确认关闭吗?").then(()=>{a()}).catch(()=>{})},S=async a=>{_.value.fileName=a.data;let e=await ve(_.value);console.log(e)},$=()=>{c()},A=async()=>{let a=await he(h.value);v.value=a.data},F=()=>{c()};return(a,e)=>{const I=ae,y=le,p=oe,M=se,E=ne,C=re,n=ie,R=de,k=pe,T=ue,j=ce;return J(),K(Z,null,[t(C,{class:"el_card"},{default:l(()=>[g("div",we,[g("div",xe,[t(M,{inline:!0},{default:l(()=>[t(y,{label:"查询医院"},{default:l(()=>[t(I,{placeholder:"请输入医院名称",modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=s=>h.value=s)},null,8,["modelValue"])]),_:1}),t(y,null,{default:l(()=>[t(p,{type:"primary",size:"default",title:"请添加搜索条件",onClick:A,icon:o(O)},{default:l(()=>[...e[6]||(e[6]=[u("搜索",-1)])]),_:1},8,["icon"]),t(p,{icon:o(Q),onClick:F},{default:l(()=>[...e[7]||(e[7]=[u("重置",-1)])]),_:1},8,["icon"])]),_:1})]),_:1})]),g("div",ye,[t(E,{class:"upload-demo",action:`${o(V)}/common/upload/excel`,multiple:"",headers:{token:o(b)},"on-success":U},{default:l(()=>[t(p,{type:"success",icon:o(W)},{default:l(()=>[...e[8]||(e[8]=[u("批量导入Excel文件医院",-1)])]),_:1},8,["icon"])]),_:1},8,["action","headers"])])])]),_:1}),t(C,{style:{"margin-top":"10px"}},{default:l(()=>[t(k,{border:"",style:{margin:"10px 0px"},data:o(v)},{default:l(()=>[t(n,{label:"序号",width:"60px",type:"index",align:"center"}),t(n,{label:"id",prop:"id",align:"center","show-overflow-tooltip":""}),t(n,{label:"医院",prop:"name",align:"center","show-overflow-tooltip":""}),t(n,{label:"地区",prop:"address",align:"center","show-overflow-tooltip":""}),t(n,{label:"操作",align:"center",width:"300px","show-overflow-tooltip":""},{default:l(({row:s,$index:Ce})=>[t(p,{type:"primary",onClick:q=>P(s.name),icon:o(X)},{default:l(()=>[...e[9]||(e[9]=[u("旗下科室",-1)])]),_:1},8,["onClick","icon"]),t(R,{title:"旗下所有科室也会一同删除，确定删除吗?",width:"240px",onConfirm:q=>H(s.id)},{reference:l(()=>[t(p,{type:"danger",icon:o(Y)},{default:l(()=>[...e[10]||(e[10]=[u("删除医院",-1)])]),_:1},8,["icon"])]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"]),t(T,{"current-page":o(i),"onUpdate:currentPage":e[1]||(e[1]=s=>N(i)?i.value=s:i=s),"page-size":o(d),"onUpdate:pageSize":e[2]||(e[2]=s=>N(d)?d.value=s:d=s),"page-sizes":[10,20,30],background:!0,layout:" prev, pager, next, jumper,->,sizes,total",total:o(x),onSizeChange:$,onCurrentChange:e[3]||(e[3]=s=>c())},null,8,["current-page","page-size","total"])]),_:1}),t(j,{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=s=>f.value=s),title:"旗下科室",direction:"rtl","before-close":B},{header:l(()=>[e[12]||(e[12]=g("h4",{class:"title"},"旗下医院全部科室",-1)),t(E,{class:"upload-demo",action:`${o(V)}/common/upload`,multiple:"","on-success":S,headers:{token:o(b)}},{default:l(()=>[t(p,{class:"btn",type:"info",onClick:e[4]||(e[4]=()=>{})},{default:l(()=>[...e[11]||(e[11]=[u("导入Excel科室",-1)])]),_:1})]),_:1},8,["action","headers"])]),default:l(()=>[t(k,{class:"table",data:o(w),border:"",style:{width:"100%"}},{default:l(()=>[t(n,{prop:"hospitalid",width:"200px",label:"医院id"}),t(n,{prop:"hospitalname",label:"医院名称",width:"180"}),t(n,{prop:"departmentname",label:"科室名称",width:"180"})]),_:1},8,["data"])]),_:1},8,["modelValue"])],64)}}});const Me=me(Ee,[["__scopeId","data-v-e4892cce"]]);export{Me as default};
